<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg1:#0f1020;
      --bg2:#1b1230;
      --card:#ffffff10;
      --card2:#ffffff18;
      --text:#fff;
      --muted:#d9d9ffcc;
      --accent:#ff4d8d;
      --accent2:#ffd1dc;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, #ff3d6e22, transparent 60%),
        radial-gradient(1200px 900px at 80% 30%, #8b5cf622, transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
    }

    .wrap{
      position:relative;
      width:min(980px, 92vw);
      margin: 52px auto 90px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items: start;
    }

    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 22px;
      position:relative;
      overflow:hidden;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 14px;
    }

    h1{
      margin: 8px 0 10px;
      font-size: clamp(28px, 3.2vw, 40px);
      line-height:1.1;
      letter-spacing: .2px;
    }

    .sub{
      margin: 0 0 16px;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.6;
    }

    .typebox{
      margin-top: 14px;
      padding: 14px 14px 16px;
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
      min-height: 190px;
    }
    .type{
      font-size: 16px;
      line-height: 1.7;
      white-space: pre-wrap;
    }
    .cursor{
      display:inline-block;
      width: 10px;
      height: 18px;
      transform: translateY(3px);
      border-radius: 2px;
      background: rgba(255,255,255,.85);
      margin-left: 2px;
      animation: blink 1s infinite;
    }
    @keyframes blink{ 0%,49%{opacity:1} 50%,100%{opacity:.15} }

    .actions{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
      align-items:center;
    }

    button{
      border: 0;
      border-radius: 999px;
      padding: 12px 14px;
      font-weight: 650;
      font-size: 14px;
      cursor: pointer;
      color: #111;
      background: linear-gradient(180deg, #fff, #ffe7ee);
      box-shadow: 0 10px 25px rgba(255,77,141,.22);
      transition: transform .08s ease, filter .2s ease;
    }
    button:hover{ filter: brightness(1.02) }
    button:active{ transform: scale(.98) }
    .secondary{
      background: rgba(255,255,255,.1);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: none;
    }

    .note{
      font-size: 12px;
      color: rgba(255,255,255,.62);
    }

    /* Right panel */
    .right h2{
      margin: 6px 0 10px;
      font-size: 18px;
      color: rgba(255,255,255,.92);
    }
    .gift{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding: 14px;
      display:grid;
      gap: 12px;
    }
    .gift .row{
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content: space-between;
    }

    /* ===== Gallery ƒë·∫πp ki·ªÉu album ===== */
.gallery{
  display:grid;
  grid-template-columns: 1fr;
  gap: 14px;
}

/* m·ªói item l√† 1 card */
.ph{
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  overflow:hidden;
  box-shadow: 0 14px 38px rgba(0,0,0,.28);
  transform: translateY(6px);
  opacity: 0;
  animation: pop2 .55s ease forwards;
  cursor: pointer;
}

/* khung ·∫£nh d·ªçc ƒë·∫πp */
.ph.photo{
  background: none;
}

.ph .imgbox{
  width: 100%;
  position: relative;
  overflow: hidden;
  border-radius: 18px 18px 0 0;
  background: #000;
}

/* ·∫£nh ch√≠nh */
.ph .imgbox img{
  width: 100%;
  height: auto;
  display: block;
  position: relative;
  z-index: 2;
}

/* background blur t·ª´ ch√≠nh ·∫£nh */
.ph .imgbox::before{
  content: "";
  position: absolute;
  inset: 0;

  background-image: var(--bg);   /* QUAN TR·ªåNG */
  background-size: cover;
  background-position: center;

  filter: blur(25px);
  transform: scale(1.2);
  opacity: .55;
  z-index: 1;
}



/* caption ƒë∆∞a xu·ªëng d∆∞·ªõi nh∆∞ Instagram */
.ph .cap{
  padding: 12px 12px 14px;
  display:flex;
  justify-content: space-between;
  align-items:center;
  gap: 10px;
}

.ph .cap .text{
  font-size: 13px;
  color: rgba(255,255,255,.88);
  font-weight: 650;
  line-height: 1.35;

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}


.ph .cap .tag{
  font-size: 12px;
  color: rgba(255,255,255,.72);
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.08);
  padding: 6px 10px;
  border-radius: 999px;
  white-space: nowrap;
}

/* hover m∆∞·ª£t */
.ph:hover{
  transform: translateY(0) scale(1.01);
  box-shadow: 0 18px 54px rgba(0,0,0,.38);
}

/* animation ri√™ng */
@keyframes pop2{
  from{ transform: translateY(14px); opacity:0; }
  to{ transform: translateY(0); opacity:1; }
}


    .reveal{
      display:none;
      animation: pop .35s ease both;
    }
    .reveal.show{ display:block; }
    @keyframes pop{
      from{ transform: translateY(10px); opacity:0 }
      to{ transform: translateY(0); opacity:1 }
    }

    .quote{
      padding: 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.86);
      line-height:1.65;
      font-size: 14px;
    }

    .footer{
      margin-top: 12px;
      font-size: 12px;
      color: rgba(255,255,255,.55);
      display:flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Floating hearts */
    .heart{
      position: fixed;
      left: 0;
      top: 0;
      width: 14px;
      height: 14px;
      pointer-events:none;
      transform: translate(-50%,-50%) rotate(45deg);
      opacity: .95;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.25));
      animation: floatUp var(--dur) linear forwards;
      z-index: 5;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width: 14px; height: 14px;
      border-radius: 50%;
      background: var(--c);
    }
    .heart{ background: var(--c); }
    .heart:before{ left: -7px; }
    .heart:after{ top: -7px; }

    @keyframes floatUp{
      0%{ transform: translate(var(--x), var(--y)) rotate(45deg) scale(var(--s)); opacity: .95 }
      80%{ opacity: .9 }
      100%{ transform: translate(calc(var(--x) + var(--drift)), calc(var(--y) - 380px)) rotate(45deg) scale(calc(var(--s) * .9)); opacity: 0 }
    }

    /* Small screens */
    @media (max-width: 860px){
      .wrap{ grid-template-columns: 1fr; margin-top: 24px; }
    }

    /* Tiny toast */
    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 12px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.9);
      border-radius: 999px;
      backdrop-filter: blur(10px);
      font-size: 13px;
      display:none;
      z-index: 10;
    }
    .toast.show{ display:block; animation: pop .25s ease both; }

    /* ===== WOW Overlay (m·ªü qu√†) ===== */
    .wow-overlay{
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 50% 40%, rgba(255,77,141,.22), rgba(0,0,0,.72));
      backdrop-filter: blur(12px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
      padding: 16px;
    }
    .wow-overlay.show{ display:flex; animation: fadeIn .25s ease both; }
    @keyframes fadeIn{ from{opacity:0} to{opacity:1} }

    .giftbox{
      width: min(360px, 88vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
      padding: 18px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .giftbox .lid{
      font-size: 70px;
      line-height: 1;
      transform-origin: center bottom;
      animation: lidIdle 1.6s ease-in-out infinite;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
    }
    @keyframes lidIdle{
      0%,100%{ transform: translateY(0) rotate(-2deg) }
      50%{ transform: translateY(-7px) rotate(2deg) }
    }
    .giftbox.open .lid{
      animation: lidOpen .55s cubic-bezier(.2,.8,.2,1) both;
    }
    @keyframes lidOpen{
      from{ transform: translateY(0) rotate(0) }
      to{ transform: translateY(-28px) rotate(-14deg) }
    }
    .giftbox .msg{
      margin-top: 10px;
      color: rgba(255,255,255,.92);
      font-weight: 750;
      font-size: 16px;
    }
    .giftbox .sub{
      margin-top: 6px;
      color: rgba(255,255,255,.72);
      font-size: 13px;
      line-height: 1.5;
    }

    /* ===== ·∫¢nh pop l·∫ßn l∆∞·ª£t khi render ===== */
    .ph.photo{
      transform: scale(.92);
      opacity: 0;
      animation: photoPop .45s ease forwards;
      will-change: transform, opacity;
    }
    @keyframes photoPop{
      to{ transform: scale(1); opacity: 1; }
    }

    /* ===== Lightbox ph√≥ng to ·∫£nh ===== */
    .lightbox{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.78);
      backdrop-filter: blur(10px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 1000;
      padding: 18px;
    }
    .lightbox.show{ display:flex; animation: fadeIn .2s ease both; }
    .lb-card{
      width: min(860px, 94vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      box-shadow: 0 30px 90px rgba(0,0,0,.6);
      overflow:hidden;
      position: relative;
    }
    .lb-img{
      width:100%;
      height: min(72vh, 560px);
      background-size: contain;
      background-position:center;
      background-repeat:no-repeat;
      background-color: rgba(0,0,0,.25);
    }
    .lb-cap{
      padding: 12px 14px;
      color: rgba(255,255,255,.88);
      font-size: 14px;
      border-top: 1px solid rgba(255,255,255,.12);
    }
    .lb-close{
      position:absolute;
      top: 10px;
      right: 10px;
      border-radius: 999px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      font-weight: 750;
    }
    /* ===== Countdown ===== */
.countdown{
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

.cd-item{
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 16px;
  padding: 10px 8px;
  text-align:center;
  backdrop-filter: blur(6px);
  box-shadow: 0 8px 20px rgba(0,0,0,.25);
}

.cd-item .num{
  font-size: 20px;
  font-weight: 800;
  color: var(--accent2);
}

.cd-item .label{
  font-size: 12px;
  color: rgba(255,255,255,.75);
  margin-top: 4px;
}

  </style>
</head>

<body>
  <div class="wrap">
    <section class="card left">
      <div class="badge">üíå Valentine Edition ‚Ä¢ Made with love</div>
      <h1>
        G·ª≠i <span id="herName" style="color:var(--accent2)">Embe Tutu</span>,
        <span style="color:var(--accent)">anh c√≥ m·ªôt ƒëi·ªÅu mu·ªën n√≥i‚Ä¶</span>
      </h1>
      <p class="sub">
        ƒê√¢y l√† m·ªôt trang web nho nh·ªè anh t·ª± vi·∫øt. N·∫øu em ƒë·ªçc ƒë·∫øn cu·ªëi, h√£y b·∫•m <b>‚ÄúM·ªü m√≥n qu√†‚Äù</b> nh√© üòâ
      </p>

      <div class="typebox">
        <div class="type">
          <span id="typed"></span><span class="cursor"></span>
        </div>
      </div>

      <div class="actions">
        <button id="btnGift">üéÅ M·ªü m√≥n qu√†</button>
        <button class="secondary" id="btnMoreHearts">üíó Th√™m tim</button>
        <button class="secondary" id="btnMusic">üé∂ B·∫≠t nh·∫°c</button>
        <span class="note">Tip: click v√†o n·ªÅn c≈©ng s·∫Ω t·∫°o tim bay.</span>
      </div>
    </section>

    <aside class="card right">
      <h2>H·ªôp qu√† c·ªßa t·ª•i m√¨nh</h2>

      <div class="gift">
        <div class="row">
          <div style="color:rgba(255,255,255,.85);font-weight:700">üì∏ Nhi·ªÅu kho·∫£nh kh·∫Øc</div>
          <div class="note" id="today"></div>
        </div>
        <div class="countdown" id="countdown">
  <div class="cd-item">
    <div class="num" id="cdDays">00</div>
    <div class="label">Ng√†y</div>
  </div>
  <div class="cd-item">
    <div class="num" id="cdHours">00</div>
    <div class="label">Gi·ªù</div>
  </div>
  <div class="cd-item">
    <div class="num" id="cdMinutes">00</div>
    <div class="label">Ph√∫t</div>
  </div>
  <div class="cd-item">
    <div class="num" id="cdSeconds">00</div>
    <div class="label">Gi√¢y</div>
  </div>
</div>


        <!-- Gallery s·∫Ω ƒë∆∞·ª£c ƒë·ªï ·∫£nh b·∫±ng JS -->
        <div class="gallery reveal" id="gallery"></div>

        <div class="quote reveal" id="quote">
          ‚ÄúC·∫£m ∆°n em v√¨ ƒë√£ ·ªü ƒë√¢y. Anh kh√¥ng h·ª©a m·ªçi th·ª© s·∫Ω ho√†n h·∫£o,
          nh∆∞ng anh h·ª©a s·∫Ω lu√¥n t·ª≠ t·∫ø v·ªõi tr√°i tim c·ªßa em.‚Äù
          <div style="margin-top:10px;color:rgba(255,255,255,.68)">
            ‚Äî <span id="yourName">Qu·ªëc</span>
          </div>
        </div>

        <div class="reveal" id="dateIdea">
          <div class="quote" style="border-style:dashed">
            üìÖ <b>Voucher h·∫πn h√≤</b><br/>
            Em ƒë∆∞·ª£c 1 voucher 3 in 1: ƒëi ƒÉn m√≥n em th√≠ch + ƒëi d·∫°o c√¥ng vi√™n + ƒëi d·∫°o ph·ªë v·ªÅ ƒë√™m
            <br/><br/>
            M·∫≠t kh·∫©u ƒë·ªÉ nh·∫≠n: <b id="pw">LOVE</b>
          </div>
        </div>

        <div class="footer">
          <span>‚ú® Nh·∫•n ‚ÄúM·ªü m√≥n qu√†‚Äù ƒë·ªÉ hi·ªán m·ªçi th·ª©</span>
          <span>ü´∂ Made by <span id="sign">Qu·ªëc</span></span>
        </div>
      </div>
    </aside>
  </div>

  <div class="toast" id="toast">ƒê√£ b·∫≠t nh·∫°c üé∂</div>

  <!-- WOW overlay -->
  <div class="wow-overlay" id="wowOverlay" aria-hidden="true">
    <div class="giftbox" id="giftBox">
      <div class="lid">üéÅ</div>
      <div class="msg">ƒêang m·ªü m√≥n qu√†‚Ä¶</div>
      <div class="sub">Chu·∫©n b·ªã b·∫•t ng·ªù n√® üíñ</div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lb-card">
      <div class="lb-close" id="lbClose">‚úï</div>
      <div class="lb-img" id="lbImg"></div>
      <div class="lb-cap" id="lbCap">...</div>
    </div>
  </div>

  <!-- Nh·∫°c n·ªÅn: d√πng file music.mp3 trong repo -->
  <audio id="bgm" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ====== T√ôY BI·∫æN NHANH ·ªû ƒê√ÇY ======
    const CONFIG = {
      herName: "Em B√© Tutu",
      yourName: "Qu·ªëc",
      password: "LOVE",
      letter: [
        "G·ª≠i ƒë·∫øn em ƒë√¥i l·ªùi anh vi·∫øt,\n",
        "Anh kh√¥ng gi·ªèi th·ªï l·ªô t√¨nh c·∫£m qua l·ªùi n√≥i‚Ä¶ n√™n anh vi·∫øt ra trang web n√†y ƒë·ªÉ thay l·ªùi anh n√≥i.\n",
        "T·ª´ l√∫c c√≥ em, nh·ªØng ng√†y b√¨nh th∆∞·ªùng t·ª± nhi√™n tr·ªü n√™n ƒë√°ng nh·ªõ.\n",
        "Anh th√≠ch c√°ch em c∆∞·ªùi, c√°ch em n√≥i chuy·ªán, v√† c·∫£ nh·ªØng l√∫c em im l·∫∑ng.ƒê·ªëi v·ªõi anh em ƒë·∫øn nh∆∞ 1 m√≥n qu√† m√† √¥ng tr·ªùi an ·ªßi tr√°i tim anh sau nh·ªØng l·∫ßn b√£o gi√¥ng\n\n",
        "ƒê√¥i l·ªùi thay n·ªïi nh·ªõ em:\n\n",
        "M∆∞a l≈© d√†i.\n",
        "M·∫Øt m·ªù r·ªìi l·∫°i trong.\n",
        "Ng∆∞·ªùi xa Ng∆∞·ªùi.\n",
        "Ng√≥ng ch·ªù r·ªìi l·∫°i mong.\n\n",
        "C·∫£m ∆°n em v√¨ ƒë√£ ch·ªçn ·ªü b√™n anh.\n",
        "Anh y√™u em. Nhi·ªÅu h∆°n nh·ªØng g√¨ anh th·ªÉ hi·ªán.\n\n",
        "‚Äî ng∆∞·ªùi lu√¥n ƒë·ª©ng v·ªÅ ph√≠a em ‚ù§Ô∏è"
      ].join(""),
      // Th√™m bao nhi√™u ·∫£nh c≈©ng ƒë∆∞·ª£c (nh·ªõ upload v√†o th∆∞ m·ª•c images/)
    photos: [
  { src: "images/img1.jpg", caption: "T·∫•m ·∫£nh ƒë·∫ßu ti√™n ch·ª•p c√πng nhau" },
  { src: "images/img2.jpg", caption: "L·∫ßn ƒë·∫ßu ti√™n ƒëi ch·ª•p ·∫£nh √°o d√†i c√πng nhau" },
  { src: "images/img3.jpg", caption: "B√≥ hoa v√† b√°nh kem k·ªâ ni·ªám valentine th·ª© 2 c·ªßa ch√∫ng ta" },
  { src: "images/img4.jpg", caption: "Tay trong tay b∆∞·ªõc ƒëi qua nhi·ªÅu c√°i t·∫øt h∆°n n·ªØa" },
  { src: "images/img5.jpg", caption: "Mi·ªáng c√≥ th·ªÉ d·ªëi, nh∆∞ng m√† √°nh m·∫Øt n√≥i l√™n t√¨nh c·∫£m ƒë√¥i ta" },
  { src: "images/img6.jpg", caption: "Anh T·∫øt nh∆∞ anh c∆∞·ªõi, n√†ng th√¨ s√°nh vai c√πng ch√†ng IT" },
  { src: "images/img7.jpg", caption: "Anh v√† Em c√πng nhau ƒë√≥n Valentines" },
  { src: "images/img8.jpg", caption: "Ng∆∞·ªùi con g√°i m√† anh th∆∞∆°ng nh·∫•t tr·∫ßn ƒë·ªùi" },
  { src: "images/img9.jpg", caption: "Kho·∫£nh kh·∫Øc anh kh√¥ng bao gi·ªù qu√™n khi 2 ta nh∆∞ ƒë√£ v·ªÅ 1 nh√†" }
]



    };

    // ====== APPLY CONFIG ======
    const elHer = document.getElementById("herName");
    const elYou = document.getElementById("yourName");
    const elSign = document.getElementById("sign");
    const elPw = document.getElementById("pw");
    elHer.textContent = CONFIG.herName;
    elYou.textContent = CONFIG.yourName;
    elSign.textContent = CONFIG.yourName;
    elPw.textContent = CONFIG.password;

    // Date label
    const today = new Date();
    const dd = String(today.getDate()).padStart(2,'0');
    const mm = String(today.getMonth()+1).padStart(2,'0');
    const yyyy = today.getFullYear();
    document.getElementById("today").textContent = `${dd}/${mm}/${yyyy}`;

    // ====== Typewriter ======
    const typedEl = document.getElementById("typed");
    const fullText = CONFIG.letter;
    let idx = 0;
    let typing = true;

    function typeTick(){
      if(!typing) return;
      const ch = fullText[idx];
      if (ch !== undefined) {
        typedEl.textContent += ch;
        idx++;
        const base = (ch === "\n") ? 120 : 26;
        const jitter = Math.random() * 60;
        setTimeout(typeTick, base + jitter);
      } else {
        typing = false;
        burstHearts(14);
      }
    }
    typeTick();

    // ====== Hearts ======
    const COLORS = ["#ff4d8d","#ff7aa8","#ffd1dc","#b794f4","#ffb3c7","#ff5d8f"];
    function spawnHeart(x,y){
      const h = document.createElement("div");
      h.className = "heart";
      const c = COLORS[Math.floor(Math.random()*COLORS.length)];
      const s = (0.7 + Math.random()*1.2).toFixed(2);
      const dur = (1.8 + Math.random()*1.6).toFixed(2) + "s";
      const drift = ((Math.random()*160)-80).toFixed(0) + "px";

      h.style.setProperty("--c", c);
      h.style.setProperty("--s", s);
      h.style.setProperty("--dur", dur);
      h.style.setProperty("--drift", drift);
      h.style.setProperty("--x", x + "px");
      h.style.setProperty("--y", y + "px");

      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 3500);
    }

    function burstHearts(n=10){
      const cx = window.innerWidth/2;
      const cy = Math.min(window.innerHeight*0.55, 420);
      for(let i=0;i<n;i++){
        setTimeout(()=>{
          spawnHeart(cx + (Math.random()*140-70), cy + (Math.random()*80-40));
        }, i*35);
      }
    }

    document.addEventListener("click", (e)=>{
      if (e.target.tagName.toLowerCase() === "button") return;
      // tr√°nh click v√†o lightbox
      if (e.target.closest && e.target.closest("#lightbox")) return;
      spawnHeart(e.clientX, e.clientY);
    });

    document.getElementById("btnMoreHearts").addEventListener("click", ()=>{
      burstHearts(18);
    });

    // ====== Render photos ======
const gallery = document.getElementById("gallery");

function renderPhotos(){
  gallery.innerHTML = CONFIG.photos.map((p, i) => `
    <div class="ph photo"
         data-src="${p.src}"
         data-cap="${String(p.caption).replace(/"/g,'&quot;')}">

      <div class="imgbox" style="--bg:url('${p.src}')">
        <img src="${p.src}" alt="">
      </div>

      <div class="cap">
        <div class="text">${p.caption}</div>
        <div class="tag">#${i+1}</div>
      </div>

    </div>
  `).join("");
}





    // ====== Gift reveal (WOW) ======
    const btnGift = document.getElementById("btnGift");
    const quote = document.getElementById("quote");
    const dateIdea = document.getElementById("dateIdea");
    const bgm = document.getElementById("bgm");
    const btnMusic = document.getElementById("btnMusic");
    const toast = document.getElementById("toast");

    const wowOverlay = document.getElementById("wowOverlay");
    const giftBox = document.getElementById("giftBox");

    let opened = false;

    // nh·∫°c fade-in m∆∞·ª£t
    bgm.volume = 0;
    function fadeInMusic(){
      bgm.play().catch(()=>{});
      let v = 0;
      const t = setInterval(()=>{
        v = Math.min(0.65, v + 0.04);
        bgm.volume = v;
        if(v >= 0.65) clearInterval(t);
      }, 80);
    }

    // confetti ƒë∆°n gi·∫£n
    function confettiBurst(n=90){
      for(let i=0;i<n;i++){
        const d = document.createElement("div");
        d.style.position="fixed";
        d.style.left=(window.innerWidth/2 + (Math.random()*320-160))+"px";
        d.style.top=(window.innerHeight*0.45 + (Math.random()*120-60))+"px";
        d.style.width="8px";
        d.style.height="12px";
        d.style.borderRadius="2px";
        d.style.background = (Math.random()<.5) ? "#ff4d8d" : "#b794f4";
        d.style.opacity="0.95";
        d.style.transform=`rotate(${Math.random()*360}deg)`;
        d.style.zIndex="1000";
        document.body.appendChild(d);

        const dx = (Math.random()*620-310);
        const dy = (Math.random()*-460-140);
        d.animate([
          { transform:`translate(0,0) rotate(${Math.random()*360}deg)`, opacity:1 },
          { transform:`translate(${dx}px,${dy}px) rotate(${Math.random()*820}deg)`, opacity:0 }
        ], { duration: 1200 + Math.random()*650, easing: "cubic-bezier(.2,.8,.2,1)" });

        setTimeout(()=>d.remove(), 2000);
      }
    }

    btnGift.addEventListener("click", ()=>{
      if(opened){ burstHearts(10); return; }
      opened = true;

      // overlay m·ªü qu√†
      wowOverlay.classList.add("show");
      giftBox.classList.add("open");
      burstHearts(18);

      // bung qu√† sau ch√∫t x√≠u
      setTimeout(()=>{
        renderPhotos();

        // show ph·∫ßn qu√†
        gallery.classList.add("show");
        quote.classList.add("show");
        dateIdea.classList.add("show");

        // ·∫£nh pop l·∫ßn l∆∞·ª£t
        const items = gallery.querySelectorAll(".ph");
        items.forEach((el, i)=> el.style.animationDelay = (i * 90) + "ms");

        confettiBurst(95);
        burstHearts(40);

        // nh·∫°c m∆∞·ª£t
        fadeInMusic();
        musicOn = true;
        btnMusic.textContent = "üîá T·∫Øt nh·∫°c";

        btnGift.textContent = "üíù ƒê√£ m·ªü r·ªìi ƒë√≥";

        // t·∫Øt overlay
        setTimeout(()=>{
          wowOverlay.classList.remove("show");
          giftBox.classList.remove("open");
        }, 520);
      }, 650);
    });

    // ====== Music toggle ======
    let musicOn = false;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1200);
    }

    btnMusic.addEventListener("click", async ()=>{
      try{
        if(!musicOn){
          await bgm.play();
          musicOn = true;
          btnMusic.textContent = "üîá T·∫Øt nh·∫°c";
          showToast("ƒê√£ b·∫≠t nh·∫°c üé∂");
        }else{
          bgm.pause();
          musicOn = false;
          btnMusic.textContent = "üé∂ B·∫≠t nh·∫°c";
          showToast("ƒê√£ t·∫Øt nh·∫°c");
        }
      }catch(err){
        musicOn = false;
        btnMusic.textContent = "üé∂ B·∫≠t nh·∫°c";
        showToast("Ch∆∞a c√≥ file nh·∫°c / b·ªã ch·∫∑n autoplay");
      }
    });

    // Gentle ambient hearts
    setInterval(()=>{
      const x = Math.random() * window.innerWidth;
      const y = window.innerHeight - 20;
      spawnHeart(x, y);
    }, 900);

    // ====== Lightbox ph√≥ng to ·∫£nh ======
    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbCap = document.getElementById("lbCap");
    const lbClose = document.getElementById("lbClose");

    function openLightbox(src, cap){
      lbImg.style.backgroundImage = `url('${src}')`;
      lbCap.textContent = cap || "";
      lightbox.classList.add("show");
    }
    function closeLightbox(){
      lightbox.classList.remove("show");
    }
    lbClose.addEventListener("click", closeLightbox);
    lightbox.addEventListener("click", (e)=>{
      if(e.target === lightbox) closeLightbox();
    });
    document.addEventListener("keydown", (e)=>{
      if(e.key === "Escape") closeLightbox();
    });

    // click ·∫£nh ƒë·ªÉ ph√≥ng to (ch·ªâ sau khi ƒë√£ render)
    gallery.addEventListener("click", (e)=>{
      const tile = e.target.closest(".ph");
      if(!tile) return;
      const src = tile.getAttribute("data-src") || "";
      const cap = tile.getAttribute("data-cap") || "";
      if(src) openLightbox(src, cap);
    });
    function updateCountdown(){
  const now = new Date();
  let target = new Date(now.getFullYear(), 1, 14, 0, 0, 0);
  if(now > target){
    target = new Date(now.getFullYear() + 1, 1, 14, 0, 0, 0);
  }
  const diff = target - now;

  const days = Math.floor(diff / (1000*60*60*24));
  const hours = Math.floor((diff / (1000*60*60)) % 24);
  const minutes = Math.floor((diff / (1000*60)) % 60);
  const seconds = Math.floor((diff / 1000) % 60);

  document.getElementById("cdDays").textContent = String(days).padStart(2,"0");
  document.getElementById("cdHours").textContent = String(hours).padStart(2,"0");
  document.getElementById("cdMinutes").textContent = String(minutes).padStart(2,"0");
  document.getElementById("cdSeconds").textContent = String(seconds).padStart(2,"0");
}
updateCountdown();
setInterval(updateCountdown, 1000);
  </script>
</body>
</html>








